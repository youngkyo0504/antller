import { DarkBgContext } from "@components/DarkBgProvider/DarkBgProvider";
import useDarkBgContext from "@components/DarkBgProvider/useDarkBgContext";
import HistoryGraph from "@components/HistoryGraph/HistoryGraph";
import Introduction from "@components/Introduction";
import Layout from "@components/Layouts/Layout";
import InOutTransitionContainer from "@components/Layouts/TransitionContainer";
import People from "@components/People";
import { useElementClientHeight } from "@hooks";
import { motion, Variants } from "framer-motion";
import type { NextPage } from "next";
import Head from "next/head";
import { useContext, useEffect, useState } from "react";
import tw from "twin.macro";
import Header from "../src/components/Layouts/Header/Header";

const AboutPage: NextPage = () => {
  const { setIsBgBlack } = useDarkBgContext();

  useEffect(() => {
    setIsBgBlack(true);
    document.body.style.backgroundColor = "black";
    return () => {
      setIsBgBlack(false);
      document.body.style.backgroundColor = "white";
    };
  });

  const [contentHeights, setContentHeights] = useState<number[]>([]);
  const [ref1, height1] = useElementClientHeight<HTMLDivElement>();
  const [ref2, height2] = useElementClientHeight<HTMLDivElement>();

  useEffect(() => {
    setContentHeights([height1, height2]);
  }, [height1, height2]);

  return (
    <>
      <Head>
        <title>About</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <Layout isWhiteLogo={true} stickyHeaderOption={{}}>
        <InOutTransitionContainer>
          <div tw="bg-black">
            <Introduction ref={ref1} contentHeights={contentHeights} />
            <People ref={ref2} contentHeights={contentHeights} />
            <HistoryGraph />
          </div>
        </InOutTransitionContainer>
      </Layout>
    </>
  );
};

export default AboutPage;
